<?xml version="1.0" encoding="UTF-8"?>
<svg width="900" height="750" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="750" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="450" y="40" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle" fill="#2c3e50">MakmurTani System Architecture</text>
  <text x="450" y="65" font-family="Arial" font-size="14" text-anchor="middle" fill="#6c757d">Blockchain-Based Agricultural RWA Tokenization Platform</text>
  
  <!-- Improved Legend with better visibility -->
  <rect x="650" y="20" width="230" height="36" rx="18" fill="#ffffff" stroke="#6c757d" stroke-width="1" />
  
  <circle cx="660" cy="38" r="6" fill="#0c5460" />
  <text x="666" y="42" font-family="Arial" font-size="11" font-weight="bold" fill="#0c5460">User</text>
  
  <circle cx="700" cy="38" r="6" fill="#155724" />
  <text x="715" y="42" font-family="Arial" font-size="11" font-weight="bold" fill="#155724">App</text>
  
  <circle cx="750" cy="38" r="6" fill="#856404" />
  <text x="756" y="42" font-family="Arial" font-size="11" font-weight="bold" fill="#856404">Backend</text>
  
  <circle cx="812" cy="38" r="6" fill="#721c24" />
  <text x="818" y="42" font-family="Arial" font-size="11" font-weight="bold" fill="#721c24">Blockchain</text>
  
  <!-- User Layer -->
  <rect x="50" y="80" width="800" height="80" rx="10" fill="#d1ecf1" stroke="#0c5460" stroke-width="2" />
  <text x="450" y="110" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#0c5460">User Interfaces</text>
  
  <!-- User Interface Components -->
  <rect x="80" y="95" width="140" height="50" rx="5" fill="#ffffff" stroke="#0c5460" stroke-width="1" />
  <text x="150" y="125" font-family="Arial" font-size="14" text-anchor="middle" fill="#0c5460">Farmer Portal</text>
  
  <rect x="250" y="95" width="140" height="50" rx="5" fill="#ffffff" stroke="#0c5460" stroke-width="1" />
  <text x="320" y="125" font-family="Arial" font-size="14" text-anchor="middle" fill="#0c5460">Investor Portal</text>
  
  <rect x="420" y="95" width="140" height="50" rx="5" fill="#ffffff" stroke="#0c5460" stroke-width="1" />
  <text x="490" y="125" font-family="Arial" font-size="14" text-anchor="middle" fill="#0c5460">Marketplace</text>
  
  <rect x="590" y="95" width="140" height="50" rx="5" fill="#ffffff" stroke="#0c5460" stroke-width="1" />
  <text x="660" y="125" font-family="Arial" font-size="14" text-anchor="middle" fill="#0c5460">Supply Tracking</text>
  
  <!-- Application Layer -->
  <rect x="50" y="180" width="800" height="110" rx="10" fill="#d4edda" stroke="#155724" stroke-width="2" />
  <text x="450" y="210" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#155724">Frontend (Next.js PWA)</text>
  
  <!-- Frontend Components -->
  <rect x="80" y="230" width="100" height="40" rx="5" fill="#ffffff" stroke="#155724" stroke-width="1" />
  <text x="130" y="255" font-family="Arial" font-size="12" text-anchor="middle" fill="#155724">React Components</text>
  
  <rect x="200" y="230" width="100" height="40" rx="5" fill="#ffffff" stroke="#155724" stroke-width="1" />
  <text x="250" y="255" font-family="Arial" font-size="12" text-anchor="middle" fill="#155724">Wagmi Hooks</text>
  
  <rect x="320" y="230" width="100" height="40" rx="5" fill="#ffffff" stroke="#155724" stroke-width="1" />
  <text x="370" y="255" font-family="Arial" font-size="12" text-anchor="middle" fill="#155724">i18n Localization</text>
  
  <rect x="440" y="230" width="100" height="40" rx="5" fill="#ffffff" stroke="#155724" stroke-width="1" />
  <text x="490" y="255" font-family="Arial" font-size="12" text-anchor="middle" fill="#155724">PWA Features</text>
  
  <rect x="560" y="230" width="120" height="40" rx="5" fill="#ffffff" stroke="#155724" stroke-width="1" />
  <text x="620" y="255" font-family="Arial" font-size="12" text-anchor="middle" fill="#155724">TailwindCSS UI</text>
  
  <rect x="700" y="230" width="120" height="40" rx="5" fill="#ffffff" stroke="#155724" stroke-width="1" />
  <text x="760" y="255" font-family="Arial" font-size="12" text-anchor="middle" fill="#155724">Bilingual Support</text>
  
  <!-- Backend Layer -->
  <rect x="50" y="310" width="800" height="100" rx="10" fill="#fff3cd" stroke="#856404" stroke-width="2" />
  <text x="450" y="340" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#856404">Backend Services</text>
  
  <!-- Backend Components -->
  <rect x="80" y="360" width="120" height="40" rx="5" fill="#ffffff" stroke="#856404" stroke-width="1" />
  <text x="140" y="385" font-family="Arial" font-size="12" text-anchor="middle" fill="#856404">Supabase Database</text>
  
  <rect x="220" y="360" width="120" height="40" rx="5" fill="#ffffff" stroke="#856404" stroke-width="1" />
  <text x="280" y="385" font-family="Arial" font-size="12" text-anchor="middle" fill="#856404">REST API Services</text>
  
  <rect x="360" y="360" width="120" height="40" rx="5" fill="#ffffff" stroke="#856404" stroke-width="1" />
  <text x="420" y="385" font-family="Arial" font-size="12" text-anchor="middle" fill="#856404">Authentication</text>
  
  <rect x="500" y="360" width="120" height="40" rx="5" fill="#ffffff" stroke="#856404" stroke-width="1" />
  <text x="560" y="385" font-family="Arial" font-size="12" text-anchor="middle" fill="#856404">IPFS Storage</text>
  
  <rect x="640" y="360" width="140" height="40" rx="5" fill="#ffffff" stroke="#856404" stroke-width="1" />
  <text x="710" y="385" font-family="Arial" font-size="12" text-anchor="middle" fill="#856404">Supply Chain Tracking</text>
  
  <!-- Blockchain Layer -->
  <rect x="50" y="430" width="800" height="180" rx="10" fill="#f8d7da" stroke="#721c24" stroke-width="2" />
  <text x="450" y="460" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#721c24">Blockchain Infrastructure</text>
  
  <!-- Smart Contract Layer -->
  <rect x="70" y="480" width="360" height="120" rx="5" fill="#ffffff" stroke="#721c24" stroke-width="1" />
  <text x="250" y="500" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#721c24">Smart Contracts</text>
  
  <rect x="80" y="510" width="160" height="35" rx="3" fill="#f1f1f1" stroke="#721c24" stroke-width="1" />
  <text x="160" y="532" font-family="Arial" font-size="12" text-anchor="middle" fill="#721c24">RWAFarmersToken</text>
  
  <rect x="80" y="555" width="160" height="35" rx="3" fill="#f1f1f1" stroke="#721c24" stroke-width="1" />
  <text x="160" y="577" font-family="Arial" font-size="12" text-anchor="middle" fill="#721c24">IndonesianFarmlandRegistry</text>
  
  <rect x="260" y="510" width="160" height="35" rx="3" fill="#f1f1f1" stroke="#721c24" stroke-width="1" />
  <text x="340" y="532" font-family="Arial" font-size="12" text-anchor="middle" fill="#721c24">MakmurTaniMarketplace</text>
  
  <rect x="260" y="555" width="160" height="35" rx="3" fill="#f1f1f1" stroke="#721c24" stroke-width="1" />
  <text x="340" y="577" font-family="Arial" font-size="12" text-anchor="middle" fill="#721c24">DeFiLending</text>
  
  <!-- Blockchain Integrations -->
  <rect x="450" y="480" width="380" height="120" rx="5" fill="#ffffff" stroke="#721c24" stroke-width="1" />
  <text x="640" y="500" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#721c24">Blockchain Features</text>
  
  <!-- First row -->
  <rect x="460" y="510" width="110" height="35" rx="3" fill="#f1f1f1" stroke="#721c24" stroke-width="1" />
  <text x="515" y="532" font-family="Arial" font-size="12" text-anchor="middle" fill="#721c24">Lisk L2</text>
  
  <rect x="585" y="510" width="110" height="35" rx="3" fill="#f1f1f1" stroke="#721c24" stroke-width="1" />
  <text x="640" y="532" font-family="Arial" font-size="12" text-anchor="middle" fill="#721c24">IDRX Stablecoin</text>
  
  <rect x="710" y="510" width="110" height="35" rx="3" fill="#f1f1f1" stroke="#721c24" stroke-width="1" />
  <text x="765" y="532" font-family="Arial" font-size="12" text-anchor="middle" fill="#721c24">Chainlink Oracles</text>
  
  <!-- Second row -->
  <rect x="460" y="555" width="110" height="35" rx="3" fill="#f1f1f1" stroke="#721c24" stroke-width="1" />
  <text x="515" y="577" font-family="Arial" font-size="12" text-anchor="middle" fill="#721c24">Asset Tokenization</text>
  
  <rect x="585" y="555" width="110" height="35" rx="3" fill="#f1f1f1" stroke="#721c24" stroke-width="1" />
  <text x="640" y="577" font-family="Arial" font-size="12" text-anchor="middle" fill="#721c24">RWA Verification</text>
  
  <rect x="710" y="555" width="110" height="35" rx="3" fill="#f1f1f1" stroke="#721c24" stroke-width="1" />
  <text x="765" y="577" font-family="Arial" font-size="12" text-anchor="middle" fill="#721c24">Transparent Records</text>
  
  <!-- IoT & External Layer - Expanded and improved -->
  <rect x="50" y="630" width="800" height="100" rx="10" fill="#e2e3e5" stroke="#383d41" stroke-width="2" />
  <text x="450" y="655" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#383d41">IoT &amp; Real-World Integration</text>
  
  <!-- IoT Components - Better spaced -->
  <rect x="70" y="670" width="140" height="45" rx="5" fill="#ffffff" stroke="#383d41" stroke-width="1" />
  <text x="140" y="698" font-family="Arial" font-size="12" text-anchor="middle" fill="#383d41">Soil &amp; Weather Sensors</text>
  
  <rect x="230" y="670" width="140" height="45" rx="5" fill="#ffffff" stroke="#383d41" stroke-width="1" />
  <text x="300" y="698" font-family="Arial" font-size="12" text-anchor="middle" fill="#383d41">RFID/QR Tracking</text>
  
  <rect x="390" y="670" width="140" height="45" rx="5" fill="#ffffff" stroke="#383d41" stroke-width="1" />
  <text x="460" y="698" font-family="Arial" font-size="12" text-anchor="middle" fill="#383d41">GPS Land Mapping</text>
  
  <rect x="550" y="670" width="140" height="45" rx="5" fill="#ffffff" stroke="#383d41" stroke-width="1" />
  <text x="620" y="698" font-family="Arial" font-size="12" text-anchor="middle" fill="#383d41">Regulatory Compliance</text>
  
  <rect x="710" y="670" width="120" height="45" rx="5" fill="#ffffff" stroke="#383d41" stroke-width="1" />
  <text x="770" y="698" font-family="Arial" font-size="12" text-anchor="middle" fill="#383d41">KYC/AML</text>
  
  <!-- Connecting Lines -->
  <!-- User to Frontend -->
  <line x1="450" y1="160" x2="450" y2="180" stroke="#6c757d" stroke-width="2" stroke-dasharray="5,5" />
  
  <!-- Frontend to Backend -->
  <line x1="450" y1="290" x2="450" y2="310" stroke="#6c757d" stroke-width="2" stroke-dasharray="5,5" />
  
  <!-- Backend to Blockchain -->
  <line x1="450" y1="410" x2="450" y2="430" stroke="#6c757d" stroke-width="2" stroke-dasharray="5,5" />
  
  <!-- Blockchain to IoT -->
  <line x1="450" y1="610" x2="450" y2="630" stroke="#6c757d" stroke-width="2" stroke-dasharray="5,5" />
  
  <!-- Data Flow Arrows -->
  <!-- Farmer to Marketplace -->
  <path d="M 150,145 Q 320,170 490,145" fill="none" stroke="#0c5460" stroke-width="1.5" stroke-dasharray="3,3" />
  <polygon points="490,145 480,141 480,149" fill="#0c5460" />
  
  <!-- Investor to Marketplace -->
  <path d="M 320,145 Q 405,170 490,145" fill="none" stroke="#0c5460" stroke-width="1.5" stroke-dasharray="3,3" />
  <polygon points="490,145 480,141 480,149" fill="#0c5460" />
  
  <!-- Marketplace to Supply Chain -->
  <path d="M 560,125 Q 610,125 660,125" fill="none" stroke="#0c5460" stroke-width="1.5" stroke-dasharray="3,3" />
  <polygon points="660,125 650,121 650,129" fill="#0c5460" />
  
  <!-- Smart Contract Integration Lines -->
  <path d="M 160,510 Q 100,430 230,360" fill="none" stroke="#721c24" stroke-width="1.5" stroke-dasharray="3,3" />
  <polygon points="230,360 220,356 220,364" fill="#721c24" />
  
  <path d="M 340,510 Q 400,430 560,360" fill="none" stroke="#721c24" stroke-width="1.5" stroke-dasharray="3,3" />
  <polygon points="560,360 550,356 550,364" fill="#721c24" />
  
  <!-- IoT Integration with Blockchain -->
  <path d="M 140,670 Q 130,630 160,600" fill="none" stroke="#383d41" stroke-width="1.5" stroke-dasharray="3,3" />
  <polygon points="160,600 152,604 156,608" fill="#383d41" />
  
  <path d="M 620,670 Q 680,630 700,600" fill="none" stroke="#383d41" stroke-width="1.5" stroke-dasharray="3,3" />
  <polygon points="700,600 692,604 696,608" fill="#383d41" />
  
  <!-- Wallet Integration -->
  <rect x="750" y="300" width="140" height="50" rx="5" fill="#ffffff" stroke="#4682B4" stroke-width="2" />
  <text x="820" y="330" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold" fill="#4682B4">Xellar Wallet</text>
  <line x1="750" y1="325" x2="700" y2="250" stroke="#4682B4" stroke-width="2" stroke-dasharray="5,5" />
  <line x1="820" y1="350" x2="820" y2="480" stroke="#4682B4" stroke-width="2" stroke-dasharray="5,5" />
</svg> 